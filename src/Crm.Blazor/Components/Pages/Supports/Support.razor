@page "/supports"
@using Crm.Support

@inject ISupportTicketAppService SupportTicketAppService

    <Container>
        <Row>
        <h2>Support</h2>
        <p>If you have any issues or questions, submit a support ticket below.</p>
        </Row>

        <!--Support Form-->
        <Row class="mt-3">
            <Column md="6">
            <Card>
                <CardHeader>
                    <h3>Submit a Ticket</h3>
                </CardHeader>
                <CardBody>
                    <Field Horizontal>
                        <FieldLabel ColumnSize="ColumnSize.Is2" Class="fw-bold">Full Name:</FieldLabel>
                        <FieldBody ColumnSize="ColumnSize.Is10" >
                            <TextEdit @bind-Text="SupportTicketCreateDto.CustomerFullName"
                                      Placeholder="Enter full name" Style="background-color: white; border: 1px solid #ced4da;" />

                        </FieldBody>
                    </Field>
                    <Field Horizontal>
                        <FieldLabel ColumnSize="ColumnSize.Is2" Class="fw-bold">E-Mail:</FieldLabel>
                        <FieldBody ColumnSize="ColumnSize.Is10">
                            <TextEdit @bind-Text="SupportTicketCreateDto.Email" Placeholder="Enter e-mail" Style="background-color: white; border: 1px solid #ced4da;" />
                        </FieldBody>
                    </Field>
                    <Field Horizontal> 
                        <FieldLabel ColumnSize="ColumnSize.Is2" Class="fw-bold">Subject:</FieldLabel>
                        <FieldBody ColumnSize="ColumnSize.Is10">
                            <TextEdit @bind-Text="SupportTicketCreateDto.Subject" Placeholder="Enter subject" Style="background-color: white; border: 1px solid #ced4da;" />
                        </FieldBody>
                    </Field>
                    <Field Horizontal>
                        <FieldLabel ColumnSize="ColumnSize.Is2" Class="fw-bold">Message:</FieldLabel>
                        <FieldBody ColumnSize="ColumnSize.Is10">
                            <TextEdit @bind-Text="SupportTicketCreateDto.Description" Placeholder="Enter message" Style="background-color: white; border: 1px solid #ced4da;" />
                        </FieldBody>
                    </Field>
                    <Field Class="d-flex justify-content-center" Style="margin-top: 0.5rem;">
                        <Button Color="Color.Primary"
@*                         Clicked="CreateSupportTicketAsync" 
 *@                        Class="mt-3">Submit</Button>
                    </Field>
                </CardBody>                              
            </Card>
            </Column>            
        </Row>

        <!--Your Tickets-->
        <Row class="mt-2">
        <Column>
            <h4>Your Tickets</h4>
@*             Data Grid
 *@        </Column>
    </Row>
    </Container>

@code {
    private SupportTicketCreateDto SupportTicketCreateDto = new();

    // #region Create Support Ticket
    // private async Task CreateSupportTicketAsync()
    // {
    //     await SupportTicketAppService.CreateAsync(SupportTicketCreateDto);
    //     SupportTicketCreateDto = new SupportTicketCreateDto();
    // }
    // #endregion
  }

@* <Layout>
    <Container>
        <Row class="mt-4">
            <Column>
                <h2>Support</h2>
                <p>If you have any issues or questions, submit a support ticket below.</p>
            </Column>
        </Row>

        <!-- Support Form -->
        <Row class="mt-3">
            <Column>
                <Card>
                    <CardHeader>
                        <strong>Submit a Ticket</strong>
                    </CardHeader>
                    <CardBody>
                                <Field>
                                    <Label>Full Name</Label>
                                    <TextEdit @bind-Value="ticket.FullName" Placeholder="Your name..." />
                                </Field>
                                <Field>
                                    <Label>Email</Label>
                                    <TextEdit @bind-Value="ticket.Email" Placeholder="Your email..." />
                                </Field>
                                <Field>
                                    <Label>Subject</Label>
                                    <TextEdit @bind-Value="ticket.Subject" Placeholder="Subject..." />
                                </Field>
                                <Field>
                                    <Label>Message</Label>
                                    <MemoEdit @bind-Value="ticket.Message" Placeholder="Describe your issue..." />
                                </Field>

                            <Button Color="Color.Primary" Clicked="SubmitTicket">Submit</Button>
                    </CardBody>
                </Card>
            </Column>
        </Row>

        <!-- Ticket List -->
        <Row class="mt-5">
            <Column>
                <h4>Your Tickets</h4>
                <DataGrid TItem="SupportTicket" Data="@tickets" AutoGenerateColumns="false" Striped>
                    <DataGridColumns>
                        <DataGridColumn TItem="SupportTicket" Field="@nameof(SupportTicket.FullName)" Caption="Name" />
                        <DataGridColumn TItem="SupportTicket" Field="@nameof(SupportTicket.Email)" Caption="Email" />
                        <DataGridColumn TItem="SupportTicket" Field="@nameof(SupportTicket.Subject)" Caption="Subject" />
                        <DataGridColumn TItem="SupportTicket" Field="@nameof(SupportTicket.Message)" Caption="Message" />
                        <DataGridColumn TItem="SupportTicket" Field="@nameof(SupportTicket.CreatedAt)" Caption="Date" />
                    </DataGridColumns>
                </DataGrid>
            </Column>
        </Row>
    </Container>
</Layout>

@code {
    private SupportTicket ticket = new SupportTicket();
    private List<SupportTicket> tickets = new List<SupportTicket>();

    private void SubmitTicket()
    {
        
            ticket.CreatedAt = DateTime.Now;
            tickets.Add(ticket);
            ticket = new SupportTicket(); // formu temizle
        
    }

    public class SupportTicket
    {
        public string FullName { get; set; }
        public string Email { get; set; }
        public string Subject { get; set; }
        public string Message { get; set; }
        public DateTime CreatedAt { get; set; }
    }
} *@